<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

    <div id="test">

    </div>
    <input type="file" name="fs" id="fileupload" />
    <button type="button" onclick="lick()" id="done-button">Convert to Blob (look in the console)</button>

    <!-- Firebase App is always required and must be first -->
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase-app.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- Add additional services that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase-functions.js"></script>

    <!-- Comment out (or don't include) services that you don't want to use -->
    <!-- <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-storage.js"></script> -->

    <script>
        function lick() {
            // var oReq = new XMLHttpRequest();
            // oReq.open("POST", url, true);
            // oReq.onload = function (oEvent) {
            //     // Uploaded.
            // };
            var file = $('#fileupload')[0].files[0];
            console.log(file);
            // var formData = new FormData();
            // formData.append(file);
            $.ajax({
                url: "http://localhost:8080/a",
                type: "POST",
                crossDomain: true,
                data: file,
                processData: false,
                contentType: 'application/json',
                success: function (response) {
                    console.log(response);
                    // .. do something
                },
                error: function (jqXHR, textStatus, errorMessage) {
                    console.log(errorMessage); // Optional
                }
            });
        }

        var config = {
            apiKey: "AIzaSyA6rgyF62FhuV--3T3H0uREeSL8YrDJIAA",
            authDomain: "ads-orders.firebaseapp.com",
            databaseURL: "https://ads-orders.firebaseio.com",
            projectId: "ads-orders",
            storageBucket: "ads-orders.appspot.com",
            messagingSenderId: "949999655001"
        };
        firebase.initializeApp(config);
        var database = firebase.database();
        function writeUserData(orderId, boots, personId) {
            firebase.database().ref().push({
                id: orderId,
                time: new Date().toISOString(),
                boots,
                personId
            });
            console.log('Order is added');
        }

        function getOrderById(orderId) {
            firebase.database().ref().orderByChild("id").equalTo(orderId).once('value').then((data) => {
                console.log(data.val());
            });
        }

        function getOrdersOfPerson(personId) {
            myOrders = [];
            firebase.database().ref().orderByChild("personId").equalTo('akshatshetty2908@gmail.com').on('value', (data) => {
                document.getElementById('test').innerHTML = JSON.stringify(data.val());
                console.log(data.val());
            });
        }

        function getAllOrderData() {
            firebase.database().ref().once('value').then((data) => {
                console.log(data.val());
            })
        }
        getOrdersOfPerson('akshatshetty2908@gmail.com');
    </script>
</body>

</html>